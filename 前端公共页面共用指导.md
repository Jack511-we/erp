# 前端公共页面开发与共用指导

## 一、公共区域统一规范

1. **公共头部与脚部统一**
   - 所有页面必须通过 JS 动态加载公共头部（public-header.html）和脚部（public-footer.html），禁止本地重复写头部/脚部结构。
   - 公共模板文件路径统一为：
     - 头部：`../public-header.html`
     - 脚部：`../public-footer.html`
   - 模板内容必须用 `<template id="public-header-01">` 和 `<template id="public-footer-01">` 包裹。

2. **容器隔离与结构**
   - 公共头部容器：`<div id="public-header-container"></div>`
   - 公共脚部容器：`<div id="public-footer-container"></div>`
   - 主内容区容器建议：`<div id="container-product" style="margin-top:72px;">...</div>`
   - 所有页面主内容区与公共区完全隔离，禁止跨容器操作。

3. **样式与参数统一**
   - 公共头部高度统一为 45px，脚部高度自适应。
   - body 必须设置 `padding-top: 45px;`，主内容区 `margin-top:72px;`，确保视觉一致。
   - 所有样式必须限定在容器作用域内，禁止全局选择器影响其他容器。

4. **JS 动态加载模板标准代码**
   ```js
   fetch('../public-header.html')
     .then(res => res.text())
     .then(html => {
       const temp = document.createElement('div');
       temp.innerHTML = html;
       const tpl = temp.querySelector('template#public-header-01');
       if (tpl) {
         document.getElementById('public-header-container').appendChild(tpl.content.cloneNode(true));
       }
     });
   fetch('../public-footer.html')
     .then(res => res.text())
     .then(html => {
       const temp = document.createElement('div');
       temp.innerHTML = html;
       const tpl = temp.querySelector('template#public-footer-01');
       if (tpl) {
         document.getElementById('public-footer-container').appendChild(tpl.content.cloneNode(true));
       }
     });
   ```

5. **参数与全局变量统一**
   - 账号、国家下拉框由公共头部自动加载，所有页面自动同步。
   - 全局变量：`window.selectedAccount`、`window.selectedCountry`，页面可直接使用。
   - 如需联动，建议定义 `window.onAccountCountryChange` 回调。

6. **容器隔离与尺寸规范**
   - 每个容器必须独立，禁止跨容器修改布局或样式。
   - 容器间距统一为 `margin-top:72px`，主内容区推荐 `min-height:240px`。
   - 所有尺寸用 px，禁止 em、rem、vh、vw 等混用。

## 二、常见问题与处理建议

- 公共区内容不一致：统一所有页面引用的公共模板路径和文件名。
- 头部高度不一致：统一 body 和主内容区的 margin/padding。
- 样式冲突：所有样式加容器前缀，禁止全局选择器。
- 本地重复结构：彻底删除页面本地头部/脚部，只保留公共容器和动态加载 JS。

## 三、维护与协作建议

- 公共模板文件只需维护一份，所有页面自动同步。
- 新页面开发时，直接引用公共容器和加载 JS，无需复制头部/脚部代码。
- 所有参数、样式、逻辑变更，优先在公共模板和指导文件中更新。

---

## 四、本次公共区异常问题总结与优化建议

### 问题总结
1. 部分页面（如 index06.html）公共头部未正常显示蓝色底框，结构和样式异常。
2. 原因包括：
  - 公共头部样式 `.main-header` 未补充或被覆盖，导致视觉不一致。
  - 页面结构存在冗余，主内容区重复，影响渲染。
  - 公共模板动态加载逻辑虽正确，但样式依赖未统一。
  - 部分页面本地样式未与公共区隔离，存在污染风险。

### 优化建议
1. 公共头部、脚部样式必须在公共 CSS 文件或页面 `<style>` 内补充完整，确保所有页面一致。
2. 严格按照容器隔离规范，业务区样式加前缀，禁止覆盖公共区类名。
3. 页面结构只保留公共容器和主内容区，彻底删除本地重复头部/脚部结构。
4. 主内容区布局统一采用 `margin-top:72px`，body 设置 `padding-top:45px`，确保视觉一致。
5. 公共模板文件和加载 JS 逻辑只维护一份，所有页面同步引用。
6. 新页面开发时，优先参考本指导文件，避免重复踩坑。
7. 如遇异常，优先排查公共模板内容、样式加载和结构冗余。

---

如需批量修正或自动化处理，请联系前端协作负责人。
