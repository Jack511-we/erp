# ERP数据分析系统 API 接口文档

---

## 1. 订单分析接口

### 路径
`POST /api/order_analysis`

### 参数
| 参数名      | 类型   | 必填 | 说明           |
| ----------- | ------ | ---- | -------------- |
| start_date  | string | 是   | 开始日期       |
| end_date    | string | 是   | 结束日期       |
| module      | string | 是   | 模块类型（order）|
| filters     | object | 否   | 其他筛选条件   |

### 返回
```json
{
  "categories": ["SKU1", "SKU2", "SKU3"],
  "series": [
    { "name": "销售额", "data": [1200, 1500, 900] },
    { "name": "订单量", "data": [30, 45, 20] }
  ],
  "details": [ ... ],
  "status": 0,
  "message": "success"
}
```

### 异常
| 状态码 | message         | 说明           |
| ------ | --------------- | -------------- |
| 1      | 参数错误        | 缺少必填参数   |
| 2      | 数据异常        | 数据获取失败   |
| 3      | 系统异常        | 后端错误       |

---

## 2. 批量报表导出接口

### 路径
`POST /api/batch_export`

### 参数
| 参数名      | 类型   | 必填 | 说明           |
| ----------- | ------ | ---- | -------------- |
| modules     | array  | 是   | 模块列表       |
| start_date  | string | 是   | 开始日期       |
| end_date    | string | 是   | 结束日期       |

### 返回
```json
[
  { "name": "order_summary_20250915.pdf", "url": "/output/order_summary_20250915.pdf" },
  { "name": "inventory_summary_20250915.xlsx", "url": "/output/inventory_summary_20250915.xlsx" }
]
```

### 异常
| 状态码 | message         | 说明           |
| ------ | --------------- | -------------- |
| 1      | 参数错误        | 缺少必填参数   |
| 2      | 数据异常        | 报表生成失败   |
| 3      | 系统异常        | 后端错误       |

---

## 3. 其他分析模块接口（示例）

### 路径
`POST /api/{module}_analysis`

### 参数
| 参数名      | 类型   | 必填 | 说明           |
| ----------- | ------ | ---- | -------------- |
| start_date  | string | 是   | 开始日期       |
| end_date    | string | 是   | 结束日期       |
| module      | string | 是   | 模块类型（如 inventory、ads、settlement）|
| filters     | object | 否   | 其他筛选条件   |

### 返回
```json
{
  "categories": ["维度1", "维度2", "维度3"],
  "series": [
    { "name": "指标A", "data": [100, 200, 300] },
    { "name": "指标B", "data": [10, 20, 30] }
  ],
  "details": [ ... ],
  "status": 0,
  "message": "success"
}
```

---

## 4. 通用说明
- 所有接口均返回标准 JSON，包含 `categories`（横轴）、`series`（数据）、`details`（明细）、`status`（状态码）、`message`（消息）。
- 支持批量请求与多模块联动。
- 异常处理完善，便于前端提示和调试。
- 文件命名统一，报表下载链接规范。

## 用户体验与团队协作优化

### 用户体验
- 页面加载速度优化：仪表盘图表懒加载，提升首屏响应速度。
- 导出报表进度提示：批量导出时弹窗实时显示进度，导出完成自动关闭。
- 多模块批量导出操作优化：一键批量导出，进度与异常提示友好。

### 团队协作
- 完善接口文档与流程图，所有接口参数、返回结构、异常处理均标准化。
- 统一代码规范与模块接口标准，关键函数中文注释，便于新成员快速上手。
- 新增分析模块或维度只需补充后端逻辑，前端自动适配，无需重复开发。
- 日志与异常处理统一，便于团队协作和排查。
